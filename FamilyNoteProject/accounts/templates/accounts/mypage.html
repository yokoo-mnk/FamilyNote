{% extends 'base.html' %}
{% load static %}
{% block content %}
<h3>マイページ</h3>
<h4>プロフィール画像</h4>
  {% if user.profile_image %}
    <img src="{{ user.profile_image.url }}" alt="プロフィール画像">
  {% else %}
    <p>プロフィール画像が設定されていません。</p>
  {% endif %}
<p>ユーザー名: {{ user.username }}</p>
<p>ニックネーム: {{ user.nickname }}</p>

<a href="{% url 'accounts:user_edit' user.pk %}">アカウント情報変更</a>
<a href="{% url 'accounts:user_edit' user.pk %}">画像登録・編集</a>
<a href="{% url 'accounts:user_edit' user.pk %}">画像削除</a>

<h4>家族情報</h4>
  {% for family in families %}
    <div>
      <ul>
        {% for member in family.members.all %}
          <li>{{ member.username }}（{{ member.nickname }}）</li>
            {% if member != user %}
              <a href="{% url 'accounts:remove_family_member' family.id member.id %}" onclick="return confirm('本当に削除しますか？')">削除</a>
            {% endif %}
        {% endfor %}
      </ul>
    </div>
  {% empty %}
    <p>まだ家族が登録されていません。</p>
  {% endfor %}

  <a href="{% url 'accounts:invite_family' %}">家族を追加する</a>

<h3>こども情報</h3>
  {% if user.children.exists %}
    <ul>
      {% for child in user.children.all %}
        <li>{{ child.name }} ({{ child.birthdate }})</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>こども情報はまだ登録されていません。</p>
  {% endif %}
  <a href="{% url 'accounts:add_child' id='openModalBtn' %}">こどもを追加する</a>
{% endblock %}
