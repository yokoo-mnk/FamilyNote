{% extends 'tasks/t_base.html' %}
{% block title %}Noteä¸€è¦§ - FamilyNote{% endblock %}
{% block content %}
<h2>Noteï½æˆ‘ãŒå®¶ã®è¨˜éŒ²ï½</h2>
<button id="add_to_todolist">ãƒã‚§ãƒƒã‚¯ã—ãŸé …ç›®ã‚’<br>ToDoãƒªã‚¹ãƒˆã¸è¿½åŠ </button>

<form form class="no-box-form" method="post" action="{% url 'tasks:home' %}">
  {% csrf_token %}
  <table>
    <thead>
      <tr>
        <th></th>
        <th>ã‚«ãƒ†ã‚´ãƒª</th>
        <th>æ—¥ä»˜</th>
        <th>æ™‚é–“</th>
        <th>ã‚¿ã‚¤ãƒˆãƒ«</th>
        <th>ãƒ¡ãƒ¢</th>
        <th>ç”»åƒ</th>
        <th>ç·¨é›†</th>
        <th>ã‚³ãƒ”ãƒ¼</th>
      </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
          <tr>
            <td>
              <input type="checkbox" name="tasks" value="{{ task.id }}" {% if task.id in request.session.selected_tasks %}checked{% endif %}>
            </td>
            <td>{{ task.get_category_display }}</td>
            <td>{{ task.formatted_due_date }}</td>
            <td>
              {% if task.start_time %}
                {{ task.start_time }}
              {% else %}
                -
              {% endif %}
            </td>
            <td>{{ task.title }}</td>
            <td>
              {% if task.memo %}
                {{ task.memo }}
              {% else %}
                -
              {% endif %}
            </td>
            <td>
              {% if task.image %}
                <img src="{{ task.image.url }}" alt="Task image" width="100">
              {% else %}
                -
              {% endif %}
            </td>
            <td>
              <a href="{% url 'tasks:task_edit' task.pk %}">ğŸ“</a>  <!-- è¿½åŠ : ç·¨é›†ãƒœã‚¿ãƒ³ -->
            </td>
            <td>
              <a href="{% url 'tasks:task_copy' task.id %}">ğŸ“„</a>
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5">ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</td>
          </tr>
        {% endfor %}
    </tbody>
  </table>
</form>

<script>
document.getElementById('add_to_todolist').addEventListener('click', function() {
  var form = document.getElementById('task_form');
    form.submit();
});
</script>


  <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div>
      {% if tasks.has_previous %}
        <a href="?page=1">&laquo; æœ€åˆ</a>
        <a href="?page={{ tasks.previous_page_number }}">å‰ã¸</a>
      {% endif %}
      <span>ãƒšãƒ¼ã‚¸ {{ tasks.number }} / {{ tasks.paginator.num_pages }}</span>
      {% if tasks.has_next %}
        <a href="?page={{ tasks.next_page_number }}">æ¬¡ã¸</a>
        <a href="?page={{ tasks.paginator.num_pages }}">æœ€å¾Œ &raquo;</a>
      {% endif %}
    </div>
{% endblock %}